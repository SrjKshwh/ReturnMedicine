{% extends "base.html" %}

{% block title %}Edit User{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h4>Edit User</h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h5>How to use this page:</h5>
                        <p>This page allows administrators to edit user account information. Modify the username, email, company name, and role as needed. Changes to roles will affect the user's access permissions (User for basic access, Reviewer for approval workflows, Admin for full system management). Ensure usernames and emails are unique across the system. Updated user information will take effect immediately upon saving.</p>
                    </div>
                    <form method="POST">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="company_name" class="form-label">Company Name</label>
                            <input type="text" class="form-control" id="company_name" name="company_name" value="{{ user.company_name or '' }}">
                        </div>
                        <div class="mb-3">
                            <label for="role" class="form-label">Role</label>
                            <select class="form-control" id="role" name="role" required>
                                <option value="user" {{ 'selected' if user.role == 'user' else '' }}>User</option>
                                <option value="reviewer" {{ 'selected' if user.role == 'reviewer' else '' }}>Reviewer</option>
                                <option value="admin" {{ 'selected' if user.role == 'admin' else '' }}>Admin</option>
                            </select>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Update User</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="mt-3">
                <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">Back to Users</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
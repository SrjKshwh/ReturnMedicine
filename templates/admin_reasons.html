{% extends "base.html" %}

{% block title %}Manage Reasons{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h2>Manage Return Reasons</h2>
            <div class="alert alert-info">
                <h5>How to use this page:</h5>
                <p>This page allows administrators to manage the classification reasons used for automatic item categorization. These reasons determine how items are classified as returnable, short-dated, outdated, etc. Use "Add New Reason" to create new classification categories. The "Edit" button modifies existing reasons, and "Delete" removes them (only if not currently used by items). Changes affect how new items are automatically classified in submissions and reports.</p>
            </div>
            <p class="text-muted">Configure the classification reasons used for automatic item categorization.</p>

            <div class="mb-3">
                <a href="{{ url_for('add_reason') }}" class="btn btn-primary">Add New Reason</a>
            </div>

            <div class="card">
                <div class="card-header">
                    <h5>Current Reasons</h5>
                </div>
                <div class="card-body">
                    {% if reasons %}
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for reason in reasons %}
                                    <tr>
                                        <td>{{ reason.id }}</td>
                                        <td>{{ reason.name }}</td>
                                        <td>{{ reason.description }}</td>
                                        <td>
                                            <a href="{{ url_for('edit_reason', id=reason.id) }}" class="btn btn-sm btn-outline-primary">Edit</a>
                                            <form method="POST" action="{{ url_for('delete_reason', id=reason.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this reason?')">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p class="text-muted">No reasons configured yet.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}